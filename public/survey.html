<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Survey Page</title>

     <!-- Some of this front end code is borrowed from 13.3 Hot Restaurant -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">



</head>

<body>

    <div class="container">

        <div class="jumbotron">
            <h1> Survey Questions</h1>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <!-- Survey Page -->
                <div class="card">
                    <div class="card-header">
                        <h2>About You</h2>
                    </div>
                    <div class="card-body">
                        <form role="form">
                            <div class="form-group">
                                <label for="name">Name (Required)</label>
                                <input type="text" class="form-control" id="name">
                            </div>
                            <div class="form-group">
                                <label for="img-link">Link to Photo Image (Required)</label>
                                <input type="text" class="form-control" id="img-link">
                            </div>
                            <div class="form-group">
                                <label for="question1">
                                    <h3>Question 1</h3> Here is the question
                                </label>
                                <select class="form-control" id="question1">
                                    <option selected>Select an Option</option>
                                    <option>1 (strongly disagree) </option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (strongly agree) </option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="question2">
                                    <h3>Question 2</h3> Here is the question
                                </label>
                                <select class="form-control" id="question2">
                                    <option selected>Select an Option</option>
                                    <option>1 (strongly disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="question3">
                                    <h3>Question 3</h3> Here is the question
                                </label>
                                <select class="form-control" id="question3">
                                    <option selected>Select an Option</option>
                                    <option>1 (strongly disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="question4">
                                    <h3>Question 4</h3> Here is the question
                                </label>
                                <select class="form-control" id="question4">
                                    <option selected>Select an Option</option>
                                    <option>1 (strongly disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="question5">
                                    <h3>Question 5</h3> Here is the question
                                </label>
                                <select class="form-control" id="question5">
                                    <option selected>Select an Option</option>
                                    <option>1 (strongly disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="question6">
                                    <h3>Question 6</h3> Here is the question
                                </label>
                                <select class="form-control" id="question6">
                                    <option selected>Select an Option</option>
                                    <option>1 (strongly disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="question7">
                                    <h3>Question 7</h3> Here is the question
                                </label>
                                <select class="form-control" id="question7">
                                    <option selected>Select an Option</option>
                                    <option>1 (strongly disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="question8">
                                    <h3>Question 8</h3> Here is the question
                                </label>
                                <select class="form-control" id="question8">
                                    <option selected>Select an Option</option>
                                    <option>1 (strongly disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="question9">
                                    <h3>Question 9</h3> Here is the question
                                </label>
                                <select class="form-control" id="question9">
                                    <option selected>Select an Option</option>
                                    <option>1 (strongly disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="question10">
                                    <h3>Question 10</h3> Here is the question
                                </label>
                                <select class="form-control" id="question10">
                                    <option selected>Select an Option</option>
                                    <option>1 (strongly disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly agree)</option>
                                </select>
                            </div>


                            <button type="submit" class="btn btn-primary submit">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>


        <footer class="footer">
            <div class="container">
                <p>
                    <a href="/api/friendslist">API Friends List</a> | <a href="/api/githubrepo">GitHub Repo</a>
                </p>
            </div>
        </footer>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>



    <script type="text/javascript">


        $(".submit").on("click", function (event) {
            event.preventDefault();

            // grabbing the form responses in an object. saving score inside an array for later use
            var newSurvey = {
                name: $("#name").val().trim(),
                photo: $("#img-link").val().trim(),
                score: [
                    $("#question1").val().trim(),
                    $("#question2").val().trim(),
                    $("#question3").val().trim(),
                    $("#question4").val().trim(),
                    $("#question5").val().trim(),
                    $("#question6").val().trim(),
                    $("#question7").val().trim(),
                    $("#question8").val().trim(),
                    $("#question9").val().trim(),
                    $("#question10").val().trim()
                ]

            };


            $.post("/api/survey", newSurvey, function (err, data) {
                //runComparison();
                if(err) {
                    console.log(err)
                } else {
                    console.log("hello world")
                    console.log(data);
                }

            });

            // $.post("/api/survey", newSurvey, function (data) {
            //     console.log("This is going to work")
            // })


        });

        // here is where we will have a call back that finds the best match

        //clear the form after submitting
        //  $("#name").val("");
        // $("#img-link").val("");
        // $("#question1").val("");
        // $("#question2").val("");
        // $("#question3").val("");
        // $("#question4").val("");
        // $("#question5").val("");
        // $("#question6").val("");
        // $("#question7").val("");
        // $("#question8").val("");
        // $("#question9").val("");
        // $("#question10").val(""); 

        //  $('.form-group').trigger("reset");



        //downloading the date from the server to carry out a comparison 
        function runComparison() {
            $.ajax({ url: "/api/survey", method: "GET" })
                .then(function (surveyData) {
                    console.log("run comparison", surveyData);
                    //here we can call on response.score and then compare? 
                    // var user1 = [];
                    // var user2 = [];

                    // var result = 0
                    // for (var i =0; i< user1.length; i++){
                    //     result += (user1[i] - user2[i]; )
                    // }
                    // alert(result)
                });
        }



    </script>

</body>


</html>